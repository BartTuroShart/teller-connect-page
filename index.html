<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <title>Connect your bank account</title>
  <!-- Include the Teller Connect client library -->
  <script src="https://cdn.teller.io/connect/connect.js"></script>
  <style>
    body { font-family: Arial, sans-serif; text-align: center; margin-top: 50px; }
    #connect-button { padding: 12px 24px; font-size: 16px; background: #0070f3; color: white; border: none; border-radius: 4px; cursor: pointer; }
  </style>
</head>
<body>
  <h1>Connect your bank account</h1>
  <p>Click the button below to securely connect your bank account to our application.</p>
  <button id="connect-button">Connect to your bank</button>

  <script>
    document.addEventListener("DOMContentLoaded", function() {
      // Initialize Teller Connect
      var tellerConnect = TellerConnect.setup({
        // Replace this with your application ID from the Teller Dashboard
        applicationId: "app_pgpn2smst823jvst44000",
        // Specify the environment: 'development' for testing or 'production' for live connections
        environment: "development",
        // List the Teller products you need (e.g., verify, balance, transactions, identity)
        products: ["verify", "balance", "transactions", "identity"],
        // Called when a user has successfully enrolled their institution
        onSuccess: function(enrollment) {
          // Send the accessToken back to your server for processing (example using fetch)
          // fetch("/api/save-token", {
          //   method: "POST",
          //   headers: { "Content-Type": "application/json" },
          //   body: JSON.stringify({ accessToken: enrollment.accessToken })
          // });
          // For demonstration purposes, we'll just alert the token
          alert("Access token received: " + enrollment.accessToken);
        },
        // Called when the user closes Teller Connect without connecting
        onExit: function() {
          alert("You have closed the connection flow.");
        },
        onInit: function() {
          console.log("Teller Connect has initialized");
        }
      });

      // Bind the button to open Teller Connect
      var button = document.getElementById("connect-button");
      button.addEventListener("click", function() {
        tellerConnect.open();
      });
    });
  </script>
</body>
</html>
